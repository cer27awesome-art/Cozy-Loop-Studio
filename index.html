<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cozy Loop Studio — Cozy Crochet Bundle</title>
  <meta name="description" content="Cozy Loop Studio — Cozy Crochet Bundle: three crochet patterns, stitch charts, wallpapers and marketing assets. Instant, client-side downloads."/>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#fffaf6;
      --card:#ffffff;
      --accent:#ffe7f0;
      --accent-2:#e6fbff;
      --muted:#6c6c72;
      --radius:16px;
      --shadow: 0 8px 30px rgba(47,38,63,0.06);
      font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#ffffff);color:#222}
    .wrap{max-width:980px;margin:36px auto;padding:28px}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:26px}
    .brand{display:flex;gap:16px;align-items:center}
    .logo{width:84px;height:84px;border-radius:14px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;flex-shrink:0}
    .logo h1{font-family: 'Pacifico', cursive;margin:0;font-size:22px;color:#5b3750}
    h2{margin:6px 0 0;font-size:20px}
    p.lead{color:var(--muted);margin-top:12px}
    .grid{display:grid;grid-template-columns:1fr 360px;gap:20px;margin-top:22px}
    .preview{background:linear-gradient(180deg,#fff,#fffaf5);border-radius:12px;padding:16px;border:1px solid rgba(0,0,0,0.03)}
    .preview .box{height:420px;border-radius:10px;border:1px dashed rgba(0,0,0,0.06);background:linear-gradient(180deg,#fff,#fff9fb);padding:14px;overflow:auto}
    .meta{background:linear-gradient(180deg,#fff,#f8fffe);border-radius:12px;padding:18px;border:1px solid rgba(0,0,0,0.03)}
    .price{font-size:26px;font-weight:600;margin:6px 0}
    .features{margin-top:12px;color:var(--muted);font-size:14px}
    .btn{display:inline-block;padding:12px 18px;border-radius:12px;background:linear-gradient(90deg,#ffd1e6,#cfeeff);color:#2a1630;font-weight:700;text-decoration:none;border:none;cursor:pointer}
    .btn.secondary{background:transparent;border:1px solid rgba(0,0,0,0.06);padding:10px 14px}
    .small{font-size:13px;color:var(--muted);margin-top:10px}
    footer{margin-top:18px;color:var(--muted);font-size:13px}
    .thumbs{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .thumb{width:120px;border-radius:10px;padding:8px;background:#fff;border:1px dashed rgba(0,0,0,0.04);text-align:center}
    .thumb img{max-width:100%;border-radius:8px}
    .note{font-size:12px;color:var(--muted);margin-top:10px}
    @media (max-width:880px){
      .grid{grid-template-columns:1fr;}
      .meta{order:-1}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="brand">
        <div class="logo" aria-hidden="true"><h1>Cozy Loop</h1></div>
        <div>
          <h2>Cozy Crochet Bundle — Beanie + Scarf + Little Pouch</h2>
          <p class="lead">Three beginner-friendly crochet patterns with stitch charts, printable cover art, and 3 coordinating phone wallpapers. Instant download after payment.</p>
        </div>
      </div>

      <div class="grid">
        <div>
          <div class="preview" aria-hidden="false">
            <div class="box" id="preview-area">
              <!-- Live preview of pattern thumbnails -->
            </div>
          </div>

          <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap;align-items:center">
            <button class="btn" id="buy-download">Buy & Download — $8</button>
            <button class="btn secondary" id="download-sample">Download Free Sample (Beanie)</button>
            <button class="btn secondary" id="preview-zip">Preview ZIP Contents</button>
          </div>

          <p class="small">Clicking <strong>Buy & Download</strong> opens PayPal in a new tab. After completing payment, your browser will generate all files and download a ZIP with everything (PDFs, PNGs, ZIP contains printable cover and thumbnails).</p>
        </div>

        <aside class="meta">
          <p class="price">$8 — Digital Pattern Pack</p>
          <div class="features">
            <ul>
              <li>3 full patterns (PDF) — Cozy Beanie, Cozy Scarf, Little Pouch</li>
              <li>Printable stitch charts (PNG) and product thumbnails</li>
              <li>3 phone wallpapers (1080×1920)</li>
              <li>Printable cover/marketing image (PNG)</li>
            </ul>
          </div>

          <div style="margin-top:12px">
            <strong>File formats</strong>
            <p style="margin:6px 0 0;color:var(--muted);font-size:13px">PDF (patterns), PNG (charts & wallpapers), ZIP (all files)</p>
          </div>

          <div style="margin-top:12px">
            <strong>Support</strong>
            <p style="margin:6px 0 0;color:var(--muted);font-size:13px">Questions? Email <em>hello@cozyloop.example</em></p>
          </div>
        </aside>
      </div>

      <div class="thumbs" id="thumbs"></div>

      <footer>
        <p>Made with yarn & ✨ by Cozy Loop Studio • <span id="year"></span></p>
      </footer>
    </div>
  </div>

  <!-- External libs -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>

  <script>
    /* -------------- Variables you CAN edit if you want later -------------- */
    const COMPANY_NAME = 'Cozy Loop Studio';
    const PRODUCT_NAME = 'Cozy Crochet Bundle';
    const PAYPAL_LINK = 'https://www.paypal.com/paypalme/dailyblissplanners'; // kept as provided
    const PRICE = 8;
    const YEAR = new Date().getFullYear();
    document.getElementById('year').textContent = YEAR;

    /* -------------- Product content (fuller pattern text, sizing, notes) -------------- */
    const PATTERNS = {
      'Cozy-Beanie-Pattern.pdf': {
        title: 'Cozy Beanie — Full Pattern',
        content: `Author: ${COMPANY_NAME}

Skill: Beginner / Easy-Intermediate
Finished size: Adult S/M (head circumference ~20-22 in). To adjust, change hook or yarn.

Materials:
- Worsted weight yarn (approx 150-200g)
- 5.5 mm (I/9) crochet hook
- Tapestry needle, scissors, stitch marker

Abbreviations:
ch = chain
sc = single crochet
hdc = half double crochet
dc = double crochet
st(s) = stitch(es)
sl st = slip stitch
rnd = round

Gauge: 12 sts x 8 rows = 4 inches in hdc

Notes:
- Work with a stitch marker for rounds.
- This pattern uses continuous rounds (do not join) unless specified.

Pattern:
Crown:
Make a magic ring.
Rnd 1: 10 hdc in ring. (10)
Rnd 2: 2 hdc in each st around. (20)
Rnd 3: *1 hdc in next st, 2 hdc in next* repeat around. (30)
Rnd 4: *1 hdc in next 2 sts, 2 hdc in next* repeat around. (40)
Rnd 5: *1 hdc in next 3, 2 hdc in next* repeat around. (50)
Rnd 6: *1 hdc in next 4, 2 hdc in next* repeat around. (60)
Continue increasing in this manner until crown diameter suits your target (measure across—aim for about 8.5 inches for adult S/M).
Body:
Work even in hdc for ~6 rounds (or until total hat depth is about 9.5\" from crown for a slouchy fit).
Ribbed cuff:
Switch to back-loop only (BLO).
Row 1: ch 1, sc BLO around for 8 rows.
Finish: Fold cuff up (optional), weave in ends. Block lightly.

Sizing:
- For larger size, continue rounds of increases until crown reaches ~9.5\" then work body as above.

Care:
- Hand wash recommended, lay flat to dry.
`
      },
      'Cozy-Scarf-Pattern.pdf': {
        title: 'Cozy Scarf — Full Pattern',
        content: `Author: ${COMPANY_NAME}

Skill: Beginner
Finished size: width ~6-8 in, length ~60-70 in (adjust chords).

Materials:
- Worsted weight yarn (300-400g)
- 5.5 mm hook

Abbreviations:
ch, sc, hdc, dc as usual.

Pattern:
Ch 30 (or desired width).
Row 1: sc in 2nd ch from hook and across. Turn.
Row 2: ch 2 (counts as hdc), hdc in each st across. Turn.
Repeat Rows 1-2 until scarf reaches desired length (~60-70\").
Border: sc around edge with 2-3 sts in each corner for a tidy finish.
Texture variation:
For a textured version alternate every 6th row with a shell pattern: (2 dc, ch1, 2 dc) in the same st to create subtle ridges.

Finishing:
Weave in ends. Block to shape if desired.
`
      },
      'Little-Pouch-Pattern.pdf': {
        title: 'Little Pouch — Full Pattern',
        content: `Author: ${COMPANY_NAME}

Skill: Beginner
Materials:
- Worsted or DK weight yarn (30-50g)
- 4.0-4.5 mm hook
- Small zipper (optional)

Pattern:
Ch 21.
Row 1: sc in 2nd ch from hook and across (20). Turn.
Rows 2-18: ch1, sc across. (18 rows for ~4\" height)
Finish:
Fold rectangle in half and seam sides with sc or mattress stitch. Add zipper or button as desired.
Variation:
Make the rectangle longer for a larger pouch. Add a lining for structure.
`
      }
    };

    /* -------------- Helper: generate pattern PDF using jsPDF -------------- */
    const { jsPDF } = window.jspdf;

    function generatePdfFromText(title, text, filename) {
      // Create jsPDF document
      const doc = new jsPDF({ unit: 'pt', format: 'letter' });
      const margin = 40;
      const pageWidth = doc.internal.pageSize.getWidth();
      const pageHeight = doc.internal.pageSize.getHeight();
      let y = margin;

      doc.setFont('helvetica', 'bold');
      doc.setFontSize(18);
      doc.text(title, margin, y);
      y += 22;

      doc.setFont('helvetica', 'normal');
      doc.setFontSize(11);

      const lines = doc.splitTextToSize(text, pageWidth - margin*2);
      for (let i = 0; i < lines.length; i++) {
        if (y > pageHeight - 60) {
          doc.addPage();
          y = margin;
        }
        doc.text(lines[i], margin, y);
        y += 14;
      }

      // footer
      doc.setFontSize(9);
      doc.text(`Made with ✨ by ${COMPANY_NAME}`, margin, pageHeight - 28);
      return doc.output('blob'); // return a blob for zipping
    }

    /* -------------- Generate stitch chart PNGs (canvas) -------------- */
    function generateStitchChartPNG(idx, size=1200, squares=16) {
      const canvas = document.createElement('canvas');
      canvas.width = size;
      canvas.height = size;
      const ctx = canvas.getContext('2d');

      // background gradient
      const grad = ctx.createLinearGradient(0,0,size,size);
      if (idx%3===0) { grad.addColorStop(0,'#fff1f6'); grad.addColorStop(1,'#e8fbff'); }
      else if (idx%3===1){ grad.addColorStop(0,'#fffaf0'); grad.addColorStop(1,'#e6fff7'); }
      else { grad.addColorStop(0,'#f6ecff'); grad.addColorStop(1,'#fff5fb'); }
      ctx.fillStyle = grad;
      ctx.fillRect(0,0,size,size);

      const margin = 80;
      const gridSize = size - margin*2;
      const cell = gridSize / squares;
      for (let r=0;r<squares;r++){
        for (let c=0;c<squares;c++){
          // alternate fills
          ctx.fillStyle = ((r+c)%2===0) ? 'rgba(255,255,255,0.85)' : 'rgba(255,255,255,0.6)';
          ctx.fillRect(margin + c*cell + 2, margin + r*cell + 2, cell-4, cell-4);
        }
      }

      // Title
      ctx.fillStyle = '#4b2f3f';
      ctx.font = 'bold 36px serif';
      ctx.fillText('Stitch Chart', margin, 54);

      return new Promise((res)=>canvas.toBlob(blob=>res(blob),'image/png'));
    }

    /* -------------- Generate wallpapers (1080x1920) -------------- */
    function generateWallpaperPNG(idx, width=1080, height=1920) {
      const canvas = document.createElement('canvas');
      canvas.width = width;
      canvas.height = height;
      const ctx = canvas.getContext('2d');

      const palettes = [
        ['#ffe7f0','#e6fbff'],
        ['#fff6e6','#e6fff7'],
        ['#f7ecff','#fff0f6']
      ];
      const [c1,c2] = palettes[idx%palettes.length];
      const grad = ctx.createLinearGradient(0,0,width,height);
      grad.addColorStop(0,c1); grad.addColorStop(1,c2);
      ctx.fillStyle = grad; ctx.fillRect(0,0,width,height);

      // sprinkle stars
      for (let s=0;s<160;s++){
        ctx.fillStyle = 'rgba(255,255,255,0.8)';
        const x = Math.random() * width;
        const y = Math.random() * height;
        ctx.fillRect(x,y,Math.random()*2+0.5,Math.random()*2+0.5);
      }
      // overlay title
      ctx.fillStyle = '#4b2f3f';
      ctx.font = 'bold 72px serif';
      ctx.fillText('Cozy Loop', 80, 160);

      return new Promise((res)=>canvas.toBlob(blob=>res(blob),'image/png'));
    }

    /* -------------- Generate cover / marketing PNG and thumbnails -------------- */
    function generateCoverPNG(width=1200, height=1600) {
      const canvas = document.createElement('canvas');
      canvas.width = width; canvas.height = height;
      const ctx = canvas.getContext('2d');
      const grad = ctx.createLinearGradient(0,0,width,height);
      grad.addColorStop(0,'#fff6f9'); grad.addColorStop(1,'#f0ffff');
      ctx.fillStyle = grad; ctx.fillRect(0,0,width,height);

      // big title
      ctx.fillStyle = '#4b2f3f';
      ctx.font = 'bold 68px serif';
      ctx.fillText('Cozy Crochet Bundle', 80, 160);

      ctx.font = '28px serif';
      ctx.fillText('Beanie • Scarf • Little Pouch', 80, 210);

      // decorative yarn circle
      const cx = width - 240, cy = 260;
      for (let i=0;i<12;i++){
        ctx.beginPath();
        ctx.strokeStyle = `rgba(200,100,140,${0.12 + i*0.02})`;
        ctx.lineWidth = 18 - i;
        ctx.arc(cx,cy,80 + i*6,0,Math.PI*2);
        ctx.stroke();
      }

      // small author
      ctx.font = '20px serif';
      ctx.fillText('by Cozy Loop Studio', 80, height - 110);

      return new Promise((res)=>canvas.toBlob(blob=>res(blob),'image/png'));
    }

    function generateThumbnailPNG(text, width=480, height=320) {
      const canvas = document.createElement('canvas');
      canvas.width = width; canvas.height = height;
      const ctx = canvas.getContext('2d');
      ctx.fillStyle = '#fff';
      ctx.fillRect(0,0,width,height);
      // gradient stripe
      const grad = ctx.createLinearGradient(0,0,width,0);
      grad.addColorStop(0,'#ffddec'); grad.addColorStop(1,'#cfeeff');
      ctx.fillStyle = grad;
      ctx.fillRect(0,0,width,120);
      ctx.fillStyle = '#4b2f3f';
      ctx.font = '24px serif';
      ctx.fillText(text, 18, 72);
      // icon
      ctx.font = '48px serif';
      ctx.fillText('🧶', width - 90, 86);
      return new Promise((res)=>canvas.toBlob(blob=>res(blob),'image/png'));
    }

    /* -------------- Create ZIP with all assets using JSZip -------------- */
    async function createProductZip() {
      const zip = new JSZip();
      const metaFolder = zip.folder('Cozy-Loop-Bundle');

      // 1) Full pattern PDFs
      for (const filename in PATTERNS) {
        const info = PATTERNS[filename];
        const blob = generatePdfFromText(info.title, info.content, filename);
        // jsPDF returns a blob synchronously here, so wrap appropriately
        const b = await blob; // blob is a Blob
        metaFolder.file(filename, b);
      }

      // 2) Stitch charts
      const chartsFolder = metaFolder.folder('stitch-charts');
      for (let i=0;i<3;i++){
        const blob = await generateStitchChartPNG(i, 1200, 16);
        chartsFolder.file(`stitch-chart-${i+1}.png`, blob);
      }

      // 3) Wallpapers
      const wallsFolder = metaFolder.folder('wallpapers');
      for (let i=0;i<3;i++){
        const blob = await generateWallpaperPNG(i, 1080, 1920);
        wallsFolder.file(`cozy-wallpaper-${i+1}.png`, blob);
      }

      // 4) Cover and marketing assets
      const coverBlob = await generateCoverPNG(1200,1600);
      metaFolder.file('Cozy-Loop-Cover.png', coverBlob);

      // 5) Thumbnails
      const thumbsFolder = metaFolder.folder('thumbnails');
      const thumbNames = ['Cozy-Beanie-Thumb.png', 'Cozy-Scarf-Thumb.png', 'Little-Pouch-Thumb.png'];
      for (let i=0;i<thumbNames.length;i++){
        const tb = await generateThumbnailPNG(thumbNames[i].replace('-Thumb.png',''));
        thumbsFolder.file(thumbNames[i], tb);
      }

      // 6) README text
      const readme = `Cozy Loop Studio — Cozy Crochet Bundle

Included files:
- Cozy-Beanie-Pattern.pdf
- Cozy-Scarf-Pattern.pdf
- Little-Pouch-Pattern.pdf
- stitch-charts/stitch-chart-1.png, 2.png, 3.png
- wallpapers/cozy-wallpaper-1.png, 2.png, 3.png
- Cozy-Loop-Cover.png
- thumbnails/Cozy-Beanie-Thumb.png, Cozy-Scarf-Thumb.png, Little-Pouch-Thumb.png

Thank you for supporting Cozy Loop Studio!
`;
      metaFolder.file('README.txt', readme);

      // Generate zip and return blob
      const zipBlob = await zip.generateAsync({ type: 'blob', compression: 'DEFLATE' });
      return zipBlob;
    }

    /* -------------- UI helpers: preview thumbnails and list zip contents -------------- */
    async function renderPreviewThumbs() {
      const thumbsEl = document.getElementById('thumbs');
      thumbsEl.innerHTML = '';
      // create sample thumbnails in DOM
      for (let i=0;i<3;i++){
        const canvas = document.createElement('canvas'); canvas.width=240; canvas.height=160;
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = (i===0)?'#fff6f7':(i===1)?'#fffaf0':'#f6f0ff';
        ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle = '#4b2f3f';
        ctx.font = '20px serif';
        const text = (i===0)?'Beanie':'Scarf';
        ctx.fillText(text, 18, 48);
        ctx.font = '36px serif';
        ctx.fillText('🧶', canvas.width - 68, 58);
        const wrapper = document.createElement('div'); wrapper.className='thumb';
        wrapper.appendChild(canvas);
        const label = document.createElement('div'); label.style.fontSize='13px'; label.style.marginTop='8px';
        label.textContent = (i===0)?'Cozy Beanie':'Cozy Scarf';
        wrapper.appendChild(label);
        thumbsEl.appendChild(wrapper);
      }
    }

    renderPreviewThumbs();

    /* -------------- Click handlers -------------- */
    document.getElementById('download-sample').addEventListener('click', async () => {
      // generate sample beanie PDF and trigger download
      const blob = generatePdfFromText(PATTERNS['Cozy-Beanie-Pattern.pdf'].title,
                                      PATTERNS['Cozy-Beanie-Pattern.pdf'].content,
                                      'Cozy-Beanie-Sample.pdf');
      const bb = await blob;
      saveAs(bb, 'Cozy-Beanie-Sample.pdf');
    });

    document.getElementById('preview-zip').addEventListener('click', async () => {
      // quick preview: show filenames that will be included (as alert)
      const names = [
        'Cozy-Beanie-Pattern.pdf',
        'Cozy-Scarf-Pattern.pdf',
        'Little-Pouch-Pattern.pdf',
        'stitch-charts/stitch-chart-1.png ... 3.png',
        'wallpapers/cozy-wallpaper-1.png ... 3.png',
        'Cozy-Loop-Cover.png',
        'thumbnails/*.png',
        'README.txt'
      ];
      alert('Files that will be in the ZIP:\\n\\n' + names.join('\\n'));
    });

    async function handlePurchaseFlow() {
      // Open PayPal in new tab
      window.open(PAYPAL_LINK, '_blank');

      // After payment, create zip and start download.
      // We do not verify payment server-side (no server). This is a client-side convenience: user confirms they've paid, then downloads.
      // Generate zip and save
      const buyingButton = document.getElementById('buy-download');
      buyingButton.disabled = true;
      buyingButton.textContent = 'Preparing your files...';

      try {
        const zipBlob = await createProductZip();
        saveAs(zipBlob, 'cozy_loop_bundle.zip');
        buyingButton.textContent = 'Downloaded ✓';
      } catch (err) {
        console.error(err);
        alert('Sorry — something went wrong generating files in your browser. Check the console for details.');
        buyingButton.textContent = 'Buy & Download — $8';
        buyingButton.disabled = false;
      }
    }

    document.getElementById('buy-download').addEventListener('click', () => {
      // Slight UX: open PayPal then generate after short delay (so user sees PayPal open).
      handlePurchaseFlow();
    });

    /* -------------- Final note for you (not displayed in page) -------------- */
    // This page is ready to paste into GitHub. If you host via GitHub Pages, it will act as a static shop front.
    // If you want server-side verification of PayPal transactions (recommended for production), I can add instructions later.
  </script>
</body>
</html>
